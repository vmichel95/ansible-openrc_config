---
# tasks file for openrc_config
- name: resolve platform specific vars
  include_vars: '{{ item }}'
  with_first_found:
    - files:
        - '{{ ansible_distribution }}-{{ ansible_distribution_release }}.yml'
        - '{{ ansible_distribution }}.yml'
        - '{{ ansible_os_family }}.yml'
      skip: true
      paths:
        - '{{ role_path }}/vars'

- name: collect package facts
  when: ansible_facts['os_family'] not in openrc_config_os_init_system
  package_facts:
    manager: auto

- name: Print the package facts
  debug:
    var: ansible_facts.packages

- name: configure OpenRC (mode= {{ openrc_config_config_type }})
  when: (ansible_facts['os_family'] in openrc_config_os_init_system) or (openrc_config_os_manager_package in ansible_facts.packages)
  include_tasks: '{{ openrc_config_config_type }}.yml'
